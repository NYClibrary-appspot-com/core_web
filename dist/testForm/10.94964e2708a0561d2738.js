(window.webpackJsonp=window.webpackJsonp||[]).push([[10],{YMiO:function(n,e,t){"use strict";t.r(e);var a=t("mrSG"),o=t("CcnG"),i=t("ZYCi"),r=t("oNRu"),s=t("0I1l"),d=t("4qth"),c=t("gIcY"),g=function(){function n(n,e,t,a,o,i,r){this.userService=n,this.collabservice=e,this.conversation=t,this.router=a,this.userservie=o,this.activeRoute=i,this.formBuilder=r}return n.prototype.ngOnInit=function(){return a.b(this,void 0,void 0,function(){var n=this;return a.e(this,function(e){switch(e.label){case 0:return this.userservie.getUserdetails().subscribe(function(e){n.user=e.username}),[4,this.activeRoute.paramMap.subscribe(function(e){n.convoIdent=e.get("unameOrCollabId"),n.getMessages(),setTimeout(function(){window.connect(localStorage.getItem("accessToken"))},2e3),setInterval(function(){n.loopPingCheck()},1e3)})];case 1:return e.sent(),this.userservie.getUserdetails().subscribe(function(e){n.user=e.username}),[2]}})})},n.prototype.loopPingCheck=function(){window.PingReceived&&(window.PingReceived=!1,console.log("Angular Detected Ping Receive, getting new messages."),this.getMessages())},n.prototype.getMessages=function(){var n=this;-1!=this.convoIdent.indexOf("@myhunter.cuny.edu")?this.conversation.getMessages(this.convoIdent,!1).subscribe(function(e){n.messages=e[0].messages.reverse(),console.log(n.messages)}):this.conversation.getMessages(this.convoIdent,!0).subscribe(function(e){n.messages=e[0].messages.reverse(),console.log(n.messages)})},n.prototype.sendMessage=function(){console.log("Sending message : "+this.messageInput),-1!=this.convoIdent.indexOf("@myhunter.cuny.edu")?this.conversation.sendPersonalMessage(this.messageInput,this.convoIdent).subscribe(function(n){console.log(n)}):this.conversation.sendMessageToCollabGroup(this.messageInput,this.convoIdent).subscribe(function(n){console.log(n)})},n=a.c([Object(o.n)({selector:"app-collab-messaging",template:t("j/FM"),styles:[t("dPzR")]}),a.f("design:paramtypes",[r.a,d.a,s.a,i.b,r.a,i.a,c.a])],n)}(),l=function(){function n(n,e){this.userservice=n,this.router=e,this.user=null,this.displayNames=new Map}return n.prototype.ngOnInit=function(){var n=this;this.userservice.getUserdetails().subscribe(function(e){n.user=e.username}),this.userservice.getConversations().subscribe(function(e){return n.convos=e})},n.prototype.gotoConvo=function(n){n.otherUser?(console.log("Goto personal convo: "+n.otherUser),this.router.navigate(["/conversations/message/",n.otherUser])):(console.log("Goto collab convo: "+n._id.$oid),this.router.navigate(["/conversations/message/",n._id.$oid]))},n.prototype.getUserDispname=function(n){var e=this;return this.displayNames.has(n)?this.displayNames.get(n):(this.displayNames.set(n,""),setTimeout(function(){e.userservice.getMemberdetails(n).subscribe(function(t){e.displayNames.set(n,t.name)})}),this.displayNames.get(n))},n=a.c([Object(o.n)({selector:"app-messenger",template:t("sIbu"),styles:[t("yYmg")]}),a.f("design:paramtypes",[r.a,i.b])],n)}(),m=[{path:"message/:unameOrCollabId",component:g},{path:"",component:l}],p=function(){function n(){}return n=a.c([Object(o.K)({imports:[i.c.forChild(m)],exports:[i.c]})],n)}(),u=t("Ip0R"),f=t("VWX5"),b=t("4tE/"),h=t("Wf4p"),x=t("r43C"),v=t("/dO6"),y=t("qAlS"),w=t("BHnd"),k=t("0/Q6"),I=t("UodH"),M=t("FVSy"),C=t("SMsm"),S=t("La40"),O=t("jlZm"),N=t("wmQ5"),P=t("seP3"),R=t("b716"),U=t("jQLj");t.d(e,"ConversationsModule",function(){return j});var j=function(){function n(){}return n=a.c([Object(o.K)({declarations:[g,l],imports:[u.b,p,S.a,M.a,C.a,I.a,k.a,O.a,w.a,y.b,v.a,x.a,N.a,P.c,R.b,U.a,h.j,b.b,f.a,f.b,c.d,c.i]})],n)}()},dPzR:function(n,e){n.exports="ol{\n    list-style: none;\n    margin: 0;\n    padding: 0;\n  }\n  \n  ol li{\n    display:inline-block;\n    clear: both;\n    padding: 20px;\n    border-radius: 30px;\n    margin-bottom: 2px;\n    font-family: Helvetica, Arial, sans-serif;\n  }\n  \n  .him{\n    background: #eee;\n    float: left;\n  }\n  \n  .me{\n  \n    \n    float: right;\n    background:blue;\n    color: #fff;\n  }\n  \n  .him + .me{\n    border-bottom-right-radius: 5px;\n  }\n  \n  .me + .me{\n    border-top-right-radius: 5px;\n    border-bottom-right-radius: 5px;\n  }\n  \n  .me:last-of-type {\n    border-bottom-right-radius: 30px;\n  }\n  \n  .message{\n    float: right;\n    color: #fff;\n  }\n  \n  .message{\n    border-bottom-right-radius: 5px;\n  }\n  \n  .message{\n    border-top-right-radius: 5px;\n    border-bottom-right-radius: 5px;\n  }\n  \n  .message:last-of-type {\n    border-bottom-right-radius: 30px;\n  }\n  \n  .messa{\n    z-index: 0; \n      position: fixed; \n      display: flex;\n      align-self: flex-end; \n      bottom: 7%; \n      margin-bottom: 0px;\n      margin-left: 80%; \n  }\n  \n  /* Place the navbar at the bottom of the page, and make it stick */\n  \n  .navbar {\n    z-index: inherit 0;\n    background-color: #333;\n    position: fixed;\n    bottom: 5px;\n    max-width: 800px;\n  }\n  \n  .messageSender{\n      z-index: 5; \n      position: fixed; \n      display: flex;\n      align-self: flex-end; \n      bottom: 7%; \n      margin-bottom: 5px;\n      margin-left: 80%; \n      background-color: #0084ff\n  }\n  \n  .avatar {\n      vertical-align: middle;\n      width: 50px;\n      height: 50px;\n      border-radius: 50%;\n    }\n  \n  .container-bottom {\n      float: right;\n      position: fixed;\n      bottom: 0;\n  }\n  \n  /* Chat containers */\n  \n  .container {\n    border: 2px solid #dedede;\n    background-color: #f1f1f1;\n    border-radius: 5px;\n    padding: 10px;\n    margin: 10px 0;\n  }\n  \n  /* Chat containers */\n  \n  .container2 {\n    border: 4px solid #dedede;\n    background-color: plum;\n    border-radius: 5px;\n    padding: 10px;\n    margin: 10px 0;\n    text-align: center;\n  }\n  \n  /* Darker chat container */\n  \n  .darker {\n    border-color: #ccc;\n    background-color: #ddd;\n  }\n  \n  /* Clear floats */\n  \n  .container::after {\n    content: \"\";\n    clear: both;\n    display: table;\n  }\n  \n  .right {\n    float: right;\n    margin-left: 20px;\n    margin-right:0;\n    font-size: 10px;\n  }\n  \n  .left {\n    float: left;\n    margin-right: 20px;\n    margin-left:0;\n    font-size: 10px;\n  }\n  \n  /* Style time text */\n  \n  .time-right {\n    float: right;\n    color: #aaa;\n  }\n  \n  /* Style time text */\n  \n  .time-left {\n    float: left;\n    color: #999;\n  }\n  \n  .mat-card {\n    max-width: 800px;\n    margin: auto;\n    padding: 0px;\n    height: 100%;\n    background: rgba(214, 212, 212, 0.048);\n    border: .4px solid rgb(59, 59, 59);\n    box-shadow: 0 4px 8px 0 rgba(0,0,0,0.2), 0 6px 20px 0 rgba(0, 0, 0, 0.19);\n  }\n  \n  .mat-card-header {\n   \n    font-weight: bold;\n    display: inline;\n    \n  }\n  \n  .mat-card-title  {\n    margin-left: -16px;\n    margin-right: -16px;\n    margin-top: 0px;\n    color: rgba(0, 0, 0, 0.836);\n    background: rgba(34, 34, 34, 0.13);\n    padding: 5px;\n  }\n  \n  .mat-card-content {\n    margin: 0px;\n  }\n  \n  .mat-card>.mat-card-actions:last-child {\n    margin-bottom: 5px;\n   \n  }\n  \n  .mat-card-actions .mat-button, .mat-card-actions .mat-raised-button{\n    margin: 0px;\n    margin-left: 22px;\n  }\n  \n  .mat-expansion-panel {\n    background: rgba(255, 254, 254, 0.151);\n  }\n  \n  .requirements {\n    margin-left: 30px;\n    margin-right: 30px;\n    \n  }\n  \n  .overflow {\n    overflow:auto;\n    height:500px;\n  }\n  \n  .noBg {\n    background-color: rgba(214, 212, 212, 0.048);\n  }\n  \n  .form-container {\n    display: flex;\n    flex-direction: column; \n    padding: 20px;\n    \n  }\n  \n  .content .description{\n    font-size: 20px;\n    margin-left: 30px;\n    margin-right: 30px;\n  }\n  \n  .content .date,.location,.duration{\n    margin-left: 40px;\n    margin-right: 40px;\n  }\n  \n  .mat-card {\n    font-family: Georgia, 'Times New Roman', Times, serif;\n  }\n  \n  \n  \n  \n  \n"},"j/FM":function(n,e){n.exports='\n\n        <div class="noBg overflow">\n                        <ol   *ngFor="let message of  messages">\n                                \n                                        <div *ngIf="message.sender===user">\n                                                <li class="me">\n                                                        {{message.message}}<br>\n                                                        <span class="right"> {{message.dispName}}</span>\n                                                        </li>\n                                        </div>\n                                        <div *ngIf="message.sender!==user">\n                                                <li class="him">   \n                                                        {{message.message}}<br>\n                                                        <span class="left"> {{message.dispName}}</span>   \n                                                </li>\n                                        </div>\n                                </ol>\n        </div>\n                \n        \n\n<form #form = "ngForm" (ngSubmit) = "sendMessage()">\n        <div class="form-container">\n                <mat-form-field>\n                        <input [(ngModel)] = "messageInput" name = "message" id = "username" type = "text" class = "form-control"\n                        #username = "ngModel" matInput placeholder = "Message..." required>\n                </mat-form-field> \n                <button mat-raised-button color = "primary" >Send</button>\n        </div>\n\n</form>\n        '},sIbu:function(n,e){n.exports='\n <div class = "list-viewer-wrapper">\n    <div class="list-header-title">\n    </div>\n\n    <mat-list style="padding:0" *ngIf = "convos">\n        <ng-container *ngIf = "convos.length == 0">\n            <mat-divider></mat-divider>\n                <mat-list-item>\n                    <span class = "mat-body center">Hey, looks like you have no conversations ... you can message users through their profile page.</span>\n                </mat-list-item>\n        </ng-container>\n        <ng-container *ngFor = "let convo of convos">\n            <mat-divider></mat-divider>\n            <mat-list-item (click)="gotoConvo(convo)">\n                <span class = "mat-body center">{{ convo.otherUser != null ? getUserDispname(convo.otherUser) : convo.title }}</span>\n            \n            </mat-list-item>\n            \n        </ng-container>\n      </mat-list>\n</div>'},yYmg:function(n,e){n.exports="\n  .avatar {\n    vertical-align: middle;\n    width: 50px;\n    height: 50px;\n    border-radius: 50%;\n  }\n  .mat-card-avatar {\n    background-image: url('/assets/userPhoto.png');\n    vertical-align: middle;\n    width: 50px;\n    height: 50px;\n    border-radius: 50%;\n}\n  .container-bottom {\n    float: right;\n    position: fixed;\n    bottom: 0;\n}\n  /* Chat containers */\n  .container {\n  border: 2px solid #dedede;\n  background-color: #f1f1f1;\n  border-radius: 5px;\n  padding: 10px;\n  margin: 10px 0;\n}\n  /* Chat containers */\n  .container2 {\n  border: 4px solid #dedede;\n  background-color: plum;\n  border-radius: 5px;\n  padding: 10px;\n  margin: 10px 0;\n  text-align: center;\n}\n  /* Darker chat container */\n  .darker {\n  border-color: #ccc;\n  background-color: #ddd;\n}\n  /* Clear floats */\n  .container::after {\n  content: \"\";\n  clear: both;\n  display: table;\n}\n  .right {\n  float: right;\n  margin-left: 20px;\n  margin-right:0;\n}\n  .message{\n  z-index: 5; \n    position: fixed; \n    display: flex;\n    align-self: flex-end; \n    bottom: 7%; \n    margin-bottom: 5px;\n    margin-left: 80%; \n}\n  /* Style time text */\n  .time-right {\n  float: right;\n  color: #aaa;\n}\n  /* Style time text */\n  .time-left {\n  float: left;\n  color: #999;\n}\n  .mat-card {\n  max-width: 800px;\n  margin: auto;\n  padding: 0px;\n  height: 100%;\n  background: rgba(214, 212, 212, 0.048);\n  background-repeat: repeat-x;\n  background-repeat: repeat-y;\n}\n  .mat-card2 {\n  max-width: 600px;\n  margin: auto;\n  padding: 0px;\n  height: 100%;\n  background: rgba(214, 212, 212, 0.048);\n  border: .4px solid rgb(59, 59, 59);\n  box-shadow: 0 4px 8px 0 rgba(0,0,0,0.2), 0 6px 20px 0 rgba(0, 0, 0, 0.19);\n}\n  .mat-card-header {\n \n  font-weight: bold;\n  display: inline;\n  \n}\n  .mat-card-title  {\n  margin-left: -16px;\n  margin-right: -16px;\n  margin-top: 0px;\n  color: rgba(0, 0, 0, 0.836);\n  background: rgba(34, 34, 34, 0.13);\n  padding: 5px;\n}\n  .mat-card-content {\n  margin: 0px;\n}\n  .mat-card>.mat-card-actions:last-child {\n  margin-bottom: 5px;\n \n}\n  .mat-card-actions .mat-button, .mat-card-actions .mat-raised-button{\n  margin: 0px;\n  margin-left: 22px;\n}\n  .mat-expansion-panel {\n  background: rgba(255, 254, 254, 0.151);\n}\n  .requirements {\n  margin-left: 30px;\n  margin-right: 30px;\n  \n}\n  .content .description{\n  font-size: 20px;\n  margin-left: 30px;\n  margin-right: 30px;\n}\n  .content .date,.location,.duration{\n  margin-left: 40px;\n  margin-right: 40px;\n}\n  .table{\n  width: 100%;\n  height: 100%;\n  overflow-x:  auto;\n  overflow-y:  auto;\n}\n  .mat-card {\n  font-family: Georgia, 'Times New Roman', Times, serif;\n}\n  .mat-list{\n  height: 100%;\n}\n\n"}}]);